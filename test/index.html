<!doctype html>
<html>
<head>
<style>
.ball {
  position: absolute;
  background-color: #3D6AA2;
  box-shadow: 2px 2px 6px rgb(116, 125, 163);
  background-image: linear-gradient(to right, #375479 0%,#3B90A5 100%);
  height: 60px;
  width: 60px;
  top: 10%;
  left: 10%;
  border-radius: 30px;
  -webkit-transition-property: all;
  -webkit-transition-duration: .6s;
  -webkit-transition-timing-function: cubic-bezier(0, 1.35, .5, 1.7);
}
</style>
</head>
<body>
<h1>simple test</h1>
<div>
</div>
</body>
</html>
<script src='../promise.js'></script>
<script>
//Promise = p


console.dir(Promise['000'])
function log(count) {
  return (function() {
    return function(c) {
      console.log(count, c)
    }
  })(count)
}
function delay(time) {
  return new Promise(function(resolve, reject) {
    setTimeout(function() {
      if (time == 1000) {
        reject(time)
      } else {
        resolve(time)
      }
    }, time)
  })
}

var a = Promise.deferred()
console.log(a, a.resolve)
setTimeout(function() {

  a.resolve(1)
}, 1000)

a.promise.then(log(11))
/*
delay(200).then(function(x) {
  log('x')(x)
  return 111
}).then(log(111)).then(log(112))
var xx = delay(1000)
xx.then(log('ok'))
xx.catch(log('catch'))
/*
var p = new Promise(function(resolve) {
  setTimeout(function() {
    resolve(300)
  }, 300)
}).then(log('test'))
*/
/*
console.time(1)
var xx = Promise.all([delay(800), delay(1000), delay(100)])
//console.dir(xx)
xx.then(function(x) {
  console.log(x)
  console.timeEnd(1)
}, log(404))
/*
var def = Promise.deferred()
def.promise.then(log('resolve'), log('reject'))
setTimeout(function() {
  def.resolve('700 resolved')
}, 700)

var def2 = Promise.deferred()
def2.promise.then(log('resolve'), log('reject'))
setTimeout(function() {
  def2.reject('300 resolved')
}, 300)
//def.promise
/*
Promise.cast(2222).then(function(x) {
  console.log(x)
})
var xx = delay(1000)
  .then(function(x) {
    log(1)(x);
    //throw Error(22)
    return delay(1000)
  }, function(r) {
    log(2)(r); return delay(1000)
  })
  //.then()
  .then(log(3), undefined)
  //.then(undefined, log(3))
  .then(log(4), log(5))
  .then(function(x) {
    log(4)(x)
    return delay(1000)
  }, log(5))
  .then(log(6), log(7))

var yy = delay(1000)
  .then(function(x) {
    log(1)(x);
    //throw Error(22)
    return delay(1000)
  }, function(r) {
    log(2)(r); return delay(1000)
  })
  //.then()
  .then(log(3), undefined)
  .then(undefined, log(3))
  //.then(log(4), log(5))
  .then(function(x) {
    log(4)(x)
    return delay(1000)
  }, log(5))
  .then(log(6), log(7))
  .then()
  .then()
  .then(log(9), log(10))

/*
new Promise(function(resolve, reject) {
  setTimeout(function() {
    resolve('hello') // save the resolve value
  }, 1000)
}).then(function(x) { // pop out the value or undefined
  console.log(x)
}).then(function(x) {
  console.log(x)
}).then(function(x) {
  console.log(x)
})
*/
</script>

